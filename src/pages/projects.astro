---
import BaseLayout from '../layouts/BaseLayout.astro';
import FilterableTags from '../components/FilterableTags';

// Define the shape of a Project object to satisfy TypeScript
interface Project {
  id: string;
  title: string;
  date: string;
  description: string;
  tags: string[];
  links?: {
    github?: string;
    live?: string;
  };
  highlights: string[];
  technical?: string;
}

const projects: Project[] = [
  {
    id: 'bilevel',
    title: 'Bi-level Optimization Platform',
    date: 'Oct 2025 – Present',
    description: 'Full-stack platform implementing the SACE framework via Streamlit and FastAPI.',
    tags: ['Python', 'Docker', 'FastAPI'],
    links: { github: '#' },
    highlights: ['Implemented SACE framework', 'Deployed to Linux VMs']
  },
  {
    id: 'cansat',
    title: 'CanSat Aerospace Prototype',
    date: 'Nov 2024 – July 2025',
    description: 'Engineered real-time embedded C++ firmware for a satellite probe.',
    tags: ['C++', 'MATLAB', 'Embedded Systems'],
    highlights: ['Reduced telemetry latency by 60%', 'RTOS implementation']
  }
];
---

<BaseLayout title="Projects | Adil Oryspayev">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
    <h1 class="text-4xl font-bold mb-12">Projects</h1>
    
    <FilterableTags 
      items={projects.map(p => ({ 
        ...p, 
        // TypeScript now knows links is optional and has optional properties
        url: p.links?.live || p.links?.github || '#' 
      }))} 
      type="projects" 
      client:load 
    />

    <div class="grid gap-8 mt-12">
      {projects.map((project) => (
        <div class="bg-gray-800/50 p-6 rounded-xl border border-gray-700">
           <h2 class="text-2xl font-bold text-gray-100">{project.title}</h2>
           <p class="text-gray-400 text-sm mb-4">{project.date}</p>
           <p class="text-gray-300 mb-4">{project.description}</p>
           
           <div class="flex flex-wrap gap-2 mt-4">
             {project.tags.map(tag => (
               <span class="px-2 py-1 bg-gray-900 text-xs font-mono rounded text-su-orange-light">
                 {tag}
               </span>
             ))}
           </div>
        </div>
      ))}
    </div>
  </div>
</BaseLayout>
